@page "/pages/authentication/register"
@layout LoginLayout
@attribute [AllowAnonymous]

<MudText Typo="Typo.h4" GutterBottom="true">Sign Up</MudText>
<MudText>Already have an account? <MudLink Href="/pages/authentication/login">Sign In</MudLink></MudText>

@if(Errors.Any())
{
    foreach (var error in Errors)
    {
        <MudAlert Severity="Severity.Error">@error</MudAlert>
    }
}

<EditForm Model="@_command" OnValidSubmit="SubmitAsync">
    <FluentValidationValidator/>
    <MudTextField T="string" 
                  @bind-Value="_command.UserName"
                  Label="Username" 
                  For="@(() => _command.UserName)"
                  Variant="Variant.Outlined" 
                  Class="my-4"></MudTextField>

    <MudTextField T="string" 
                  @bind-Value="_command.FirstName"
                  Label="First Name" 
                  For="@(() => _command.FirstName)"
                  Variant="Variant.Outlined" 
                  Class="my-4"></MudTextField>

    <MudTextField T="string" 
                  @bind-Value="_command.LastName"
                  Label="Last Name" 
                  For="@(() => _command.LastName)"
                  Variant="Variant.Outlined" 
                  Class="my-4"></MudTextField>

    <MudTextField T="string" 
                  @bind-Value="_command.Email"
                  Label="E-mail" 
                  For="@(() => _command.Email)"
                  Variant="Variant.Outlined"></MudTextField>

    <MudTextField @bind-Value="_command.Password" 
                  Label="Password" 
                  For="@(() => _command.Password)"
                  Variant="Variant.Outlined" 
                  InputType="@PasswordInput" 
                  Adornment="Adornment.End" 
                  AdornmentIcon="@PasswordInputIcon" 
                  OnAdornmentClick="TogglePasswordVisibility" Class="mt-4"/>

    <MudTextField @bind-Value="_command.ConfirmPassword" 
                  Label="Confirm Password" 
                  For="@(() => _command.ConfirmPassword)"
                  Variant="Variant.Outlined" 
                  InputType="InputType.Password" 
                  Class="mt-4"/>

    <MudCheckBox @bind-Checked="_command.AgreeToTerms" Label="I agree to the terms and privacy" Color="Color.Primary" Class="ml-n1 my-3"></MudCheckBox>

    <MudButton Variant="Variant.Filled" 
               Color="Color.Primary"                
               ButtonType="ButtonType.Submit"
               Size="Size.Large" 
               FullWidth="true">Register</MudButton>
</EditForm>



